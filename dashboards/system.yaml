title: System
views:
  - title: System
    path: system
    icon: mdi:cog
    cards:
      # Row 1: Actions
      - type: horizontal-stack
        cards:
          - type: button
            entity: input_button.git_push
            name: Git Push
            icon: mdi:cloud-upload
            tap_action:
              action: toggle
            show_state: false

          - type: button
            entity: input_button.generate_claude_snapshot
            name: Claude Snapshot
            icon: mdi:robot
            tap_action:
              action: toggle
            show_state: false

      # Row 2: Git Status
      - type: markdown
        title: Git Status
        content: |
          **Commit:** `{{ state_attr('sensor.git_status', 'hash') }}`
          **Meddelande:** {{ state_attr('sensor.git_status', 'message') }}
          **Ålder:** {{ state_attr('sensor.git_status', 'age') }}

      # Row 3: Automations with last triggered
      - type: entities
        title: Git Automationer
        show_header_toggle: false
        entities:
          - entity: automation.git_pull_vid_github_push
            name: Pull vid GitHub push
            secondary_info: last-triggered
          - entity: automation.git_pull_vid_uppstart
            name: Pull vid uppstart
            secondary_info: last-triggered
          - entity: automation.git_schemalagd_pull
            name: Schemalagd pull (var 6:e timme)
            secondary_info: last-triggered
          - entity: automation.git_push_lokala_andringar
            name: Push lokala ändringar
            secondary_info: last-triggered

      - type: entities
        title: Övriga Automationer
        show_header_toggle: false
        entities:
          - entity: automation.effekt_varning_vid_ny_topp
            name: Effekt - Varning vid ny topp
            secondary_info: last-triggered
          - entity: automation.claude_generate_snapshot
            name: Claude - Generate Snapshot
            secondary_info: last-triggered

      # Row 4: System Health
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.system_monitor_memory_use_percent
            name: HA Minne
            min: 0
            max: 100
            severity:
              green: 0
              yellow: 60
              red: 80
          - type: gauge
            entity: sensor.atlas_volume_1_volymanvandning
            name: NAS Vol 1
            min: 0
            max: 100
            severity:
              green: 0
              yellow: 70
              red: 85
          - type: gauge
            entity: sensor.atlas_volume_2_volymanvandning
            name: NAS Vol 2
            min: 0
            max: 100
            severity:
              green: 0
              yellow: 70
              red: 85

      # Row 5: Info
      - type: markdown
        title: Information
        content: |
          **Git Push:** Sparar och pushar lokala ändringar till GitHub.
          Kräver `github_pat` och `github_repo` i secrets.yaml.

          **Claude Snapshot:** Genererar en snapshot för Claude Desktop.

          Statusmeddelanden visas som notifieringar.
